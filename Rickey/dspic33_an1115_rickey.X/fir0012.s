; ..............................................................................
;    File   fir0012.s
; ..............................................................................

		.equ fir0012NumTaps, 511

; ..............................................................................
; Allocate and initialize filter taps

		.section .xdata, xmemory, data
		.align 1024

fir0012Taps:
.hword 	0x0001,	0x0000,	0x0000,	0x0000,	0x0000,	0x0000,	0x0000,	0x0000,	0x0000
.hword 	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001
.hword 	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0002,	0x0002
.hword 	0x0002,	0x0002,	0x0002,	0x0002,	0x0002,	0x0002,	0x0002,	0x0003,	0x0003
.hword 	0x0003,	0x0003,	0x0003,	0x0003,	0x0003,	0x0004,	0x0004,	0x0004,	0x0004
.hword 	0x0004,	0x0004,	0x0005,	0x0005,	0x0005,	0x0005,	0x0005,	0x0006,	0x0006
.hword 	0x0006,	0x0006,	0x0007,	0x0007,	0x0007,	0x0007,	0x0008,	0x0008,	0x0008
.hword 	0x0009,	0x0009,	0x0009,	0x000A,	0x000A,	0x000A,	0x000B,	0x000B,	0x000B
.hword 	0x000C,	0x000C,	0x000D,	0x000D,	0x000D,	0x000E,	0x000E,	0x000F,	0x000F
.hword 	0x0010,	0x0010,	0x0011,	0x0011,	0x0012,	0x0012,	0x0013,	0x0013,	0x0014
.hword 	0x0014,	0x0015,	0x0016,	0x0016,	0x0017,	0x0017,	0x0018,	0x0019,	0x0019
.hword 	0x001A,	0x001B,	0x001B,	0x001C,	0x001D,	0x001E,	0x001E,	0x001F,	0x0020
.hword 	0x0020,	0x0021,	0x0022,	0x0023,	0x0024,	0x0024,	0x0025,	0x0026,	0x0027
.hword 	0x0028,	0x0029,	0x0029,	0x002A,	0x002B,	0x002C,	0x002D,	0x002E,	0x002F
.hword 	0x0030,	0x0031,	0x0032,	0x0033,	0x0034,	0x0035,	0x0036,	0x0037,	0x0038
.hword 	0x0039,	0x003A,	0x003B,	0x003C,	0x003D,	0x003E,	0x003F,	0x0040,	0x0041
.hword 	0x0042,	0x0043,	0x0044,	0x0045,	0x0047,	0x0048,	0x0049,	0x004A,	0x004B
.hword 	0x004C,	0x004D,	0x004E,	0x0050,	0x0051,	0x0052,	0x0053,	0x0054,	0x0055
.hword 	0x0056,	0x0058,	0x0059,	0x005A,	0x005B,	0x005C,	0x005D,	0x005F,	0x0060
.hword 	0x0061,	0x0062,	0x0063,	0x0064,	0x0066,	0x0067,	0x0068,	0x0069,	0x006A
.hword 	0x006B,	0x006C,	0x006D,	0x006F,	0x0070,	0x0071,	0x0072,	0x0073,	0x0074
.hword 	0x0075,	0x0076,	0x0077,	0x0078,	0x0079,	0x007A,	0x007B,	0x007D,	0x007E
.hword 	0x007F,	0x0080,	0x0080,	0x0081,	0x0082,	0x0083,	0x0084,	0x0085,	0x0086
.hword 	0x0087,	0x0088,	0x0089,	0x008A,	0x008A,	0x008B,	0x008C,	0x008D,	0x008E
.hword 	0x008E,	0x008F,	0x0090,	0x0091,	0x0091,	0x0092,	0x0093,	0x0093,	0x0094
.hword 	0x0095,	0x0095,	0x0096,	0x0096,	0x0097,	0x0097,	0x0098,	0x0098,	0x0099
.hword 	0x0099,	0x009A,	0x009A,	0x009B,	0x009B,	0x009B,	0x009C,	0x009C,	0x009C
.hword 	0x009C,	0x009D,	0x009D,	0x009D,	0x009D,	0x009D,	0x009E,	0x009E,	0x009E
.hword 	0x009E,	0x009E,	0x009E,	0x009E,	0x009E,	0x009E,	0x009E,	0x009E,	0x009E
.hword 	0x009E,	0x009D,	0x009D,	0x009D,	0x009D,	0x009D,	0x009C,	0x009C,	0x009C
.hword 	0x009C,	0x009B,	0x009B,	0x009B,	0x009A,	0x009A,	0x0099,	0x0099,	0x0098
.hword 	0x0098,	0x0097,	0x0097,	0x0096,	0x0096,	0x0095,	0x0095,	0x0094,	0x0093
.hword 	0x0093,	0x0092,	0x0091,	0x0091,	0x0090,	0x008F,	0x008E,	0x008E,	0x008D
.hword 	0x008C,	0x008B,	0x008A,	0x008A,	0x0089,	0x0088,	0x0087,	0x0086,	0x0085
.hword 	0x0084,	0x0083,	0x0082,	0x0081,	0x0080,	0x0080,	0x007F,	0x007E,	0x007D
.hword 	0x007B,	0x007A,	0x0079,	0x0078,	0x0077,	0x0076,	0x0075,	0x0074,	0x0073
.hword 	0x0072,	0x0071,	0x0070,	0x006F,	0x006D,	0x006C,	0x006B,	0x006A,	0x0069
.hword 	0x0068,	0x0067,	0x0066,	0x0064,	0x0063,	0x0062,	0x0061,	0x0060,	0x005F
.hword 	0x005D,	0x005C,	0x005B,	0x005A,	0x0059,	0x0058,	0x0056,	0x0055,	0x0054
.hword 	0x0053,	0x0052,	0x0051,	0x0050,	0x004E,	0x004D,	0x004C,	0x004B,	0x004A
.hword 	0x0049,	0x0048,	0x0047,	0x0045,	0x0044,	0x0043,	0x0042,	0x0041,	0x0040
.hword 	0x003F,	0x003E,	0x003D,	0x003C,	0x003B,	0x003A,	0x0039,	0x0038,	0x0037
.hword 	0x0036,	0x0035,	0x0034,	0x0033,	0x0032,	0x0031,	0x0030,	0x002F,	0x002E
.hword 	0x002D,	0x002C,	0x002B,	0x002A,	0x0029,	0x0029,	0x0028,	0x0027,	0x0026
.hword 	0x0025,	0x0024,	0x0024,	0x0023,	0x0022,	0x0021,	0x0020,	0x0020,	0x001F
.hword 	0x001E,	0x001E,	0x001D,	0x001C,	0x001B,	0x001B,	0x001A,	0x0019,	0x0019
.hword 	0x0018,	0x0017,	0x0017,	0x0016,	0x0016,	0x0015,	0x0014,	0x0014,	0x0013
.hword 	0x0013,	0x0012,	0x0012,	0x0011,	0x0011,	0x0010,	0x0010,	0x000F,	0x000F
.hword 	0x000E,	0x000E,	0x000D,	0x000D,	0x000D,	0x000C,	0x000C,	0x000B,	0x000B
.hword 	0x000B,	0x000A,	0x000A,	0x000A,	0x0009,	0x0009,	0x0009,	0x0008,	0x0008
.hword 	0x0008,	0x0007,	0x0007,	0x0007,	0x0007,	0x0006,	0x0006,	0x0006,	0x0006
.hword 	0x0005,	0x0005,	0x0005,	0x0005,	0x0005,	0x0004,	0x0004,	0x0004,	0x0004
.hword 	0x0004,	0x0004,	0x0003,	0x0003,	0x0003,	0x0003,	0x0003,	0x0003,	0x0003
.hword 	0x0002,	0x0002,	0x0002,	0x0002,	0x0002,	0x0002,	0x0002,	0x0002,	0x0002
.hword 	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001
.hword 	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0001,	0x0000,	0x0000
.hword 	0x0000,	0x0000,	0x0000,	0x0000,	0x0000,	0x0000,	0x0001

; ..............................................................................
; Allocate delay line in (uninitialized) Y data space

		.section .ybss, ymemory, bss
		.align 1024

fir0012DelayI:
		.space fir0012NumTaps*2

		.align 1024

fir0012DelayQ:
		.space fir0012NumTaps*2
; ..............................................................................
; Allocate and intialize filter structure

		.section .data
		.global _fir0012FilterI

_fir0012FilterI:
.hword fir0012NumTaps
.hword fir0012Taps
.hword fir0012Taps+fir0012NumTaps*2-1
.hword 0xff00
.hword fir0012DelayI
.hword fir0012DelayI+fir0012NumTaps*2-1
.hword fir0012DelayI

		.global _fir0012FilterQ

_fir0012FilterQ:
.hword fir0012NumTaps
.hword fir0012Taps
.hword fir0012Taps+fir0012NumTaps*2-1
.hword 0xff00
.hword fir0012DelayQ
.hword fir0012DelayQ+fir0012NumTaps*2-1
.hword fir0012DelayQ

; ..............................................................................
; ..............................................................................
; Sample assembly language calling program
;  The following declarations can be cut and pasted as needed into a program
;		.extern	_FIRFilterInit
;		.extern	_BlockFIRFilter
;		.extern	_fir0012Filter
;
;		.section	.bss
;
;	 The input and output buffers can be made any desired size
;	   the value 40 is just an example - however, one must ensure
;	   that the output buffer is at least as long as the number of samples
;	   to be filtered (parameter 4)
;input:		.space	40
;output:	.space	40
;		.text
;
;
;  This code can be copied and pasted as needed into a program
;
;
; Set up pointers to access input samples, filter taps, delay line and
; output samples.
;		mov	#_fir0012Filter, W0	; Initalize W0 to filter structure
;		call	_FIRFilterInit	; call this function once
;
; The next 4 instructions are required prior to each subroutine call
; to _BlockFIRFilter
;		mov	#_fir0012Filter, W0	; Initalize W0 to filter structure
;		mov	#input, W1	; Initalize W1 to input buffer 
;		mov	#output, W2	; Initalize W2 to output buffer
;		mov	#20, W3	; Initialize W3 with number of required output samples
;		call	_BlockFIRFilter	; call as many times as needed
